#!/bin/bash
# ุงุณฺฉุฑูพุช ุณุงุฏู ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ ุชูุณุนู

cd "$(dirname "$0")"

echo "๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ ุชูุณุนู..."
echo ""
echo "๐ ุฏุณุชูุฑุงุช:"
echo "   npm run dev    - ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ (ูพูุฑุช 3000)"
echo "   npm run build  - ุณุงุฎุช ูพุฑูฺู"
echo "   npm run preview - ูพุดโููุงุด build"
echo ""
echo "๐ ุจุนุฏ ุงุฒ ุฑุงูโุงูุฏุงุฒุ ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉูุฏ:"
echo "   http://localhost:3000"
echo ""

# ุจุฑุฑุณ ุงูฺฉู ุขุง ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
if lsof -Pi :3000 -sTCP:LISTEN -t >/dev/null 2>&1 ; then
    echo "โ๏ธ  ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช ุฑู ูพูุฑุช 3000"
    echo "   ุจุฑุง ูุชููู ฺฉุฑุฏู: pkill -f vite"
    echo ""
    read -p "ุขุง ูโุฎูุงูุฏ ุณุฑูุฑ ุฑุง ูุชููู ู ุฏูุจุงุฑู ุฑุงูโุงูุฏุงุฒ ฺฉูุฏุ (y/n) " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        pkill -f vite
        sleep 1
    else
        echo "โ ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช"
        exit 0
    fi
fi

# ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
npm run dev
