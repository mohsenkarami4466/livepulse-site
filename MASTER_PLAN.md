# ๐ ุจุฑูุงูู ฺฉุงูู ฺฉุงุฑูุง - Master Plan

**ุชุงุฑุฎ ุงุฌุงุฏ:** 2024-12-05  
**ูุถุนุช:** ุขูุงุฏู ุจุฑุง ุงุฌุฑุง

---

## โ ฺฉุงุฑูุง ุชฺฉูู ุดุฏู

1. โ **ุจุฑุฑุณ ุชูุณู ูุงู script.js** - ุชฺฉูู ุงุณุช
2. โ **ุญุฐู ูุงู script.js ุงุถุงู** - ุญุฐู ุดุฏ (backup ููุฌูุฏ ุงุณุช)
3. โ **ุฑูุน ุฎุทุงูุง Syntax** - ุชูุงู ุฎุทุงูุง ุฑูุน ุดุฏูุฏ
4. โ **ุงุฌุงุฏ config.js** - ุงุฌุงุฏ ุดุฏ ู ุฏุฑ ูุงูโูุง globe ุงุณุชูุงุฏู ุดุฏ
5. โ **ุฌุงฺฏุฒู console.* ุฏุฑ ูุงูโูุง globe** - 56 ููุฑุฏ ุชุจุฏู ุดุฏ
6. โ **ุจูุจูุฏ error handling ุฏุฑ gold-map.js ู geo-borders.js** - ุงูุฌุงู ุดุฏ

---

## ๐ ฺฉุงุฑูุง ุจุงูโูุงูุฏู

### ๐ด ูุงุฒ 1: ุงุตูุงุญุงุช ฺฉุฏ (ูุจู ุงุฒ React/Next.js)

#### 1.1 ุงุณุชูุงุฏู ุงุฒ CONFIG ุฏุฑ ุณุงุฑ ูุงูโูุง
**ุงูููุช:** ุจุงูุง  
**ุฒูุงู ุชุฎูู:** 2-3 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ุดุฑูุน ูุดุฏู

**ฺฉุงุฑูุง:**
- [ ] `script-globes.js` - ุงุณุชูุงุฏู ุงุฒ CONFIG ุจุฑุง hardcoded values
  - [ ] Camera settings
  - [ ] Animation speeds
  - [ ] Marker sizes
  - [ ] Time intervals
- [ ] `script-ui.js` - ุงุณุชูุงุฏู ุงุฒ CONFIG ุจุฑุง UI settings
  - [ ] Breakpoints
  - [ ] Gaps
  - [ ] Animation durations
- [ ] `script-tools.js` - ุงุณุชูุงุฏู ุงุฒ CONFIG ุจุฑุง tool settings
  - [ ] Usage limits
  - [ ] Default values
- [ ] ุณุงุฑ ูุงูโูุง - ุจุฑุฑุณ ู ุงุณุชูุงุฏู ุงุฒ CONFIG

---

#### 1.2 ุจูุจูุฏ Error Handling ุฏุฑ Async Functions
**ุงูููุช:** ุจุงูุง  
**ุฒูุงู ุชุฎูู:** 3-4 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ุดุฑูุน ุดุฏู (ุฏุฑ gold-map.js ู geo-borders.js)

**ฺฉุงุฑูุง:**
- [ ] `script-globes.js` - ุจุฑุฑุณ async functions
  - [ ] `loadWorldData()` - ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ
  - [ ] `fetchMarketData()` - ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ
  - [ ] ุณุงุฑ async functions
- [ ] `script-init.js` - ุจุฑุฑุณ async functions
  - [ ] `initializeLivePulse()` - ุจุฑุฑุณ async operations
  - [ ] ุณุงุฑ async functions
- [ ] ุณุงุฑ ูุงูโูุง - ุจุฑุฑุณ async functions
  - [ ] `globe-2d-maps.js`
  - [ ] `globe-panels-draggable.js`

**ุงูฺฏู:**
```javascript
async function example() {
    try {
        // ฺฉุฏ async
        const response = await fetch('...');
        if (!response.ok) throw new Error('ุฎุทุง');
        return await response.json();
    } catch (error) {
        const log = window.logger || { error: console.error };
        log.error('ุฎุทุง ุฏุฑ example:', error);
        if (window.errorHandler) {
            window.errorHandler.handleError(error, 'example');
        }
        throw error;
    }
}
```

---

#### 1.3 ุฌููฺฏุฑ ุงุฒ Duplicate Event Listeners
**ุงูููุช:** ุจุงูุง  
**ุฒูุงู ุชุฎูู:** 2-3 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ูุงุฒ ุจู ุจุฑุฑุณ

**ฺฉุงุฑูุง:**
- [ ] `script-globes.js` - 39 ููุฑุฏ addEventListener
  - [ ] ุจุฑุฑุณ ููู event listeners
  - [ ] ุงุถุงูู ฺฉุฑุฏู flag ุจุฑุง ุฌููฺฏุฑ ุงุฒ duplicate
- [ ] `script-ui.js` - ุจุฑุฑุณ event listeners
  - [ ] ุจุฑุฑุณ ููู event listeners
  - [ ] ุงุถุงูู ฺฉุฑุฏู flag ุจุฑุง ุฌููฺฏุฑ ุงุฒ duplicate
- [ ] ุณุงุฑ ูุงูโูุง - ุจุฑุฑุณ event listeners
  - [ ] `globe-2d-maps.js`
  - [ ] `globe-panels-draggable.js`

**ุงูฺฏู:**
```javascript
// โ ุงุณุชูุงุฏู ุงุฒ flag
if (!element.hasAttribute('data-listener-attached')) {
    element.setAttribute('data-listener-attached', 'true');
    element.addEventListener('click', handler);
}
```

---

### ๐ก ูุงุฒ 2: ุจูุจูุฏูุง ฺฉุฏ (ูุจู ุงุฒ React/Next.js)

#### 2.1 ฺฉุงูุด Code Duplication
**ุงูููุช:** ูุชูุณุท  
**ุฒูุงู ุชุฎูู:** 4-5 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ูุงุฒ ุจู ุจุฑุฑุณ

**ฺฉุงุฑูุง:**
- [ ] ุงุฌุงุฏ ฺฉูุงุณ ูพุงู `BaseGlobe` ุจุฑุง ฺฉุฑูโูุง
  - [ ] ุงุณุชุฎุฑุงุฌ ููุทู ูุดุชุฑฺฉ ุงุฒ `financial-globe.js` ู `resources-globe.js`
  - [ ] ุงุฌุงุฏ ฺฉูุงุณ ูพุงู
  - [ ] Refactor ฺฉุฑุฏู ฺฉูุงุณโูุง ููุฌูุฏ
- [ ] ุงุฌุงุฏ utility functions ูุดุชุฑฺฉ
  - [ ] Helper functions ุจุฑุง event handling
  - [ ] Helper functions ุจุฑุง marker creation
  - [ ] Helper functions ุจุฑุง animation

---

#### 2.2 ุจูููโุณุงุฒ Performance
**ุงูููุช:** ูุชูุณุท  
**ุฒูุงู ุชุฎูู:** 3-4 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ูุงุฒ ุจู ุจุฑุฑุณ

**ฺฉุงุฑูุง:**
- [ ] ุงุณุชูุงุฏู ุงุฒ `requestAnimationFrame` ุจุฑุง animations
  - [ ] ุจุฑุฑุณ animation loops
  - [ ] ุชุจุฏู ุจู `requestAnimationFrame`
- [ ] ุงุณุชูุงุฏู ุงุฒ `debounce` ุจุฑุง resize events
  - [ ] ุงุถุงูู ฺฉุฑุฏู debounce utility
  - [ ] ุงุณุชูุงุฏู ุฏุฑ resize handlers
- [ ] Cleanup ููุงุณุจ event listeners
  - [ ] ุจุฑุฑุณ memory leaks
  - [ ] ุงุถุงูู ฺฉุฑุฏู cleanup functions

---

#### 2.3 ุจูุจูุฏ ูุฏุฑุช State
**ุงูููุช:** ูุชูุณุท  
**ุฒูุงู ุชุฎูู:** 2-3 ุณุงุนุช  
**ูุถุนุช:** โ๏ธ ูุงุฒ ุจู ุจุฑุฑุณ

**ฺฉุงุฑูุง:**
- [ ] ุจุฑุฑุณ state management ูุนู
  - [ ] `appState` ุฏุฑ `script-main.js`
  - [ ] `sharedGlobeData` ุฏุฑ `globe-2d-maps.js`
  - [ ] State ุฏุฑ ฺฉูุงุณโูุง
- [ ] ุงุฌุงุฏ State Manager ุณุงุฏู (ุงุฎุชุงุฑ)
  - [ ] ุง ุงุณุชูุงุฏู ุงุฒ ฺฉ object ูุฑฺฉุฒ

---

### ๐ข ูุงุฒ 3: ฺฉุงุฑูุง ุดูุง (ุจุนุฏ ุงุฒ ุงุตูุงุญุงุช)

#### 3.1 ุชุบุฑุงุช ุธุงูุฑ (UI/UX)
**ุงูููุช:** ุทุจู ูุงุฒ ุดูุง  
**ุฒูุงู ุชุฎูู:** ูุชุบุฑ  
**ูุถุนุช:** โณ ููุชุธุฑ ุดุฑูุน

**ฺฉุงุฑูุง:**
- [ ] ุชุบุฑุงุช ุธุงูุฑ
- [ ] ุจูุจูุฏ UX
- [ ] Responsive design
- [ ] Animation improvements

---

#### 3.2 ุชุบุฑุงุช ููุทู (Logic)
**ุงูููุช:** ุทุจู ูุงุฒ ุดูุง  
**ุฒูุงู ุชุฎูู:** ูุชุบุฑ  
**ูุถุนุช:** โณ ููุชุธุฑ ุดุฑูุน

**ฺฉุงุฑูุง:**
- [ ] ุชุบุฑุงุช ููุทู ุจุฑูุงูู
- [ ] ุงุถุงูู ฺฉุฑุฏู features ุฌุฏุฏ
- [ ] ุจูุจูุฏ ุนููฺฉุฑุฏ

---

#### 3.3 ุชุจุฏู ุจู React
**ุงูููุช:** ุจุนุฏ ุงุฒ ุงุตูุงุญุงุช  
**ุฒูุงู ุชุฎูู:** 2-3 ููุชู  
**ูุถุนุช:** โณ ููุชุธุฑ ุดุฑูุน

**ฺฉุงุฑูุง:**
- [ ] Setup React project
- [ ] ุชุจุฏู Components
- [ ] State Management (Redux/Zustand)
- [ ] Routing (React Router)
- [ ] Testing

---

#### 3.4 ุชุจุฏู ุจู Next.js
**ุงูููุช:** ุจุนุฏ ุงุฒ React  
**ุฒูุงู ุชุฎูู:** 1-2 ููุชู  
**ูุถุนุช:** โณ ููุชุธุฑ ุดุฑูุน

**ฺฉุงุฑูุง:**
- [ ] Setup Next.js project
- [ ] Server-Side Rendering (SSR)
- [ ] Static Site Generation (SSG)
- [ ] API Routes
- [ ] Optimization

---

## ๐ ุฎูุงุตู ุจุฑูุงูู

### ูุงุฒ 1: ุงุตูุงุญุงุช ฺฉุฏ (ูุจู ุงุฒ React/Next.js)
**ุฒูุงู ุชุฎูู:** 7-10 ุณุงุนุช  
**ุงูููุช:** ุจุงูุง

1. โ๏ธ ุงุณุชูุงุฏู ุงุฒ CONFIG ุฏุฑ ุณุงุฑ ูุงูโูุง (2-3 ุณุงุนุช)
2. โ๏ธ ุจูุจูุฏ Error Handling ุฏุฑ Async Functions (3-4 ุณุงุนุช)
3. โ๏ธ ุฌููฺฏุฑ ุงุฒ Duplicate Event Listeners (2-3 ุณุงุนุช)

### ูุงุฒ 2: ุจูุจูุฏูุง ฺฉุฏ (ูุจู ุงุฒ React/Next.js)
**ุฒูุงู ุชุฎูู:** 9-12 ุณุงุนุช  
**ุงูููุช:** ูุชูุณุท

4. โ๏ธ ฺฉุงูุด Code Duplication (4-5 ุณุงุนุช)
5. โ๏ธ ุจูููโุณุงุฒ Performance (3-4 ุณุงุนุช)
6. โ๏ธ ุจูุจูุฏ ูุฏุฑุช State (2-3 ุณุงุนุช)

### ูุงุฒ 3: ฺฉุงุฑูุง ุดูุง (ุจุนุฏ ุงุฒ ุงุตูุงุญุงุช)
**ุฒูุงู ุชุฎูู:** ูุชุบุฑ  
**ุงูููุช:** ุทุจู ูุงุฒ ุดูุง

7. โณ ุชุบุฑุงุช ุธุงูุฑ (UI/UX)
8. โณ ุชุบุฑุงุช ููุทู (Logic)
9. โณ ุชุจุฏู ุจู React (2-3 ููุชู)
10. โณ ุชุจุฏู ุจู Next.js (1-2 ููุชู)

---

## ๐ฏ ุชูุตู ุจุฑูุงูู

### ูุฑุญูู 1: ูุงุฒ 1 (ุงุตูุงุญุงุช ฺฉุฏ)
**ุฒูุงู:** 1-2 ุฑูุฒ  
**ุงูููุช:** ุจุงูุง

ุงูุฌุงู ูุงุฒ 1 ฺฉุงูู ูุจู ุงุฒ ุดุฑูุน ฺฉุงุฑูุง ุดูุง:
- ุงุณุชูุงุฏู ุงุฒ CONFIG
- ุจูุจูุฏ Error Handling
- ุฌููฺฏุฑ ุงุฒ Duplicate Event Listeners

**ูุชุฌู:** ฺฉุฏ ูพุงุฏุงุฑ ู ุขูุงุฏู ุจุฑุง ุชุบุฑุงุช ุดูุง

---

### ูุฑุญูู 2: ูุงุฒ 2 (ุจูุจูุฏูุง ฺฉุฏ) - ุงุฎุชุงุฑ
**ุฒูุงู:** 1-2 ุฑูุฒ  
**ุงูููุช:** ูุชูุณุท

ุงฺฏุฑ ุฒูุงู ุฏุงุฑุฏุ ูุงุฒ 2 ุฑุง ุงูุฌุงู ุฏูุฏ:
- ฺฉุงูุด Code Duplication
- ุจูููโุณุงุฒ Performance
- ุจูุจูุฏ ูุฏุฑุช State

**ูุชุฌู:** ฺฉุฏ ุจููู ู ุขูุงุฏู ุจุฑุง React

---

### ูุฑุญูู 3: ฺฉุงุฑูุง ุดูุง
**ุฒูุงู:** ูุชุบุฑ  
**ุงูููุช:** ุทุจู ูุงุฒ ุดูุง

ุจุนุฏ ุงุฒ ูุงุฒ 1 (ู ุงุฎุชุงุฑ ูุงุฒ 2):
- ุชุบุฑุงุช ุธุงูุฑ
- ุชุบุฑุงุช ููุทู
- ุชุจุฏู ุจู React
- ุชุจุฏู ุจู Next.js

---

## ๐ ูฺฉุงุช ููู

1. **ูุงุฒ 1 ุถุฑูุฑ ุงุณุช** - ุจุงุฏ ูุจู ุงุฒ React/Next.js ุงูุฌุงู ุดูุฏ
2. **ูุงุฒ 2 ุงุฎุชุงุฑ ุงุณุช** - ูโุชูุงูุฏ ุจุนุฏ ุงุฒ React ุงูุฌุงู ุฏูุฏ
3. **ฺฉุงุฑูุง ุดูุง** - ุจุนุฏ ุงุฒ ูุงุฒ 1 ูโุชูุงูุฏ ุดุฑูุน ฺฉูุฏ
4. **Backup ููุฌูุฏ ุงุณุช** - `script.js.backup` ุจุฑุง ูุฑุฌุน

---

## โ ฺฺฉโูุณุช ูพุดุฑูุช

### ูุงุฒ 1:
- [x] ุงุณุชูุงุฏู ุงุฒ CONFIG ุฏุฑ `script-globes.js` โ **ุชฺฉูู ุดุฏ**
- [x] ุงุณุชูุงุฏู ุงุฒ CONFIG ุฏุฑ `script-ui.js` โ **ุชฺฉูู ุดุฏ**
- [x] ุงุณุชูุงุฏู ุงุฒ CONFIG ุฏุฑ `script-tools.js` โ **ุชฺฉูู ุดุฏ**
- [x] ุจูุจูุฏ Error Handling ุฏุฑ `script-globes.js` โ **ุชฺฉูู ุดุฏ**
- [x] ุจูุจูุฏ Error Handling ุฏุฑ `script-init.js` โ **ุชฺฉูู ุดุฏ**
- [x] ุฌููฺฏุฑ ุงุฒ Duplicate Event Listeners ุฏุฑ `script-globes.js` โ **ุชฺฉูู ุดุฏ (ููุงุฑุฏ ููู)**
- [x] ุฌููฺฏุฑ ุงุฒ Duplicate Event Listeners ุฏุฑ `script-ui.js` โ **ุชฺฉูู ุดุฏ (ููุงุฑุฏ ููู)**

### ูุงุฒ 2:
- [x] ุจุฑุฑุณ Code Duplication ุฏุฑ Globe Classes โ **ฺฏุฒุงุฑุด ุงุฌุงุฏ ุดุฏ**
- [ ] ุงุฌุงุฏ ฺฉูุงุณ ูพุงู `BaseGlobeThree` (ุฏุฑ ุญุงู ุจุฑุฑุณ)
- [x] ุงุฌุงุฏ utility functions ูุดุชุฑฺฉ โ **ุชฺฉูู ุดุฏ**
- [x] ุจูููโุณุงุฒ Performance โ **ุชฺฉูู ุดุฏ (ููุงุฑุฏ ููู)**
- [x] ุจูุจูุฏ ูุฏุฑุช State โ **ุชฺฉูู ุดุฏ**

### ูุงุฒ 3:
- [ ] ุชุบุฑุงุช ุธุงูุฑ
- [ ] ุชุบุฑุงุช ููุทู
- [ ] ุชุจุฏู ุจู React
- [ ] ุชุจุฏู ุจู Next.js

---

**ุขูุงุฏู ุจุฑุง ุดุฑูุน!** ๐

